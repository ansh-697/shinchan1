<!DOCTYPE html>
<html>
  <head>
    <title>Shinchan's Birthday</title>
    <style>
      .shinchan {
        position: absolute;
        top: 50px;
        left: 0;
        animation: shinchan-movement 4s linear infinite;
      }
      @keyframes shinchan-movement {
        0% {
          left: 0;
        }
        50% {
          transform: scaleX(-1);
        }
        100% {
          left: calc(100% - 100px);
        }
      }
      #speed-up-btn, #reset-btn {
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <h1>Happy Birthday, Shinchan!</h1>
    <div>
      <img src="sing-crayon-shin-chan.gif" class="shinchan" />
      <button id="speed-up-btn">Speed Up</button>
      <button id="reset-btn">Reset</button>
    </div>
    <audio id="bday-song" autoplay>
      <source src="bday-song.mp3" type="audio/mpeg" />
    </audio>
    <div>
      <button id="play-btn">Play</button>
      <button id="pause-btn">Pause</button>
      <button id="stop-btn">Stop</button>
    </div>
    <script>
      const shinchan = document.querySelector('.shinchan');
      const speedUpBtn = document.querySelector('#speed-up-btn');
      const resetBtn = document.querySelector('#reset-btn');
      const playBtn = document.querySelector('#play-btn');
      const pauseBtn = document.querySelector('#pause-btn');
      const stopBtn = document.querySelector('#stop-btn');
      const bdaySong = document.querySelector('#bday-song');

      let speed = 1;

      function changeDirection() {
        if (shinchan.offsetLeft >= window.innerWidth - 100) {
          shinchan.style.transform = 'scaleX(-1)';
        } else if (shinchan.offsetLeft <= 0) {
          shinchan.style.transform = 'scaleX(1)';
        }
      }

      function speedUp() {
        speed += 0.5;
        shinchan.style.animationDuration = `${4 / speed}s`;
      }

      function resetSpeed() {
        speed = 1;
        shinchan.style.animationDuration = '4s';
      }

      speedUpBtn.addEventListener('click', speedUp);
      resetBtn.addEventListener('click', resetSpeed);
      playBtn.addEventListener('click', () => bdaySong.play());
      pauseBtn.addEventListener('click', () => bdaySong.pause());
      stopBtn.addEventListener('click', () => {
        bdaySong.pause();
        bdaySong.currentTime = 0;
      });

      setInterval(changeDirection, 50);
    </script>
  </body>
</html>
